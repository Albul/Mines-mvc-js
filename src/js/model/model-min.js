define("model",["events","utils","cells"],function(b,a,d){var c=function(i,h,g){var e=new d(i,h,g),f=function(m,k,l){e.open(m,k);l.push({i:m,j:k});if(e.isOther(m,k)){return}if(e.notMine(m-1,k)&&e.isClosed(m-1,k)){f(m-1,k,l)}if(e.notMine(m+1,k)&&e.isClosed(m+1,k)){f(m+1,k,l)}if(e.notMine(m,k-1)&&e.isClosed(m,k-1)){f(m,k-1,l)}if(e.notMine(m,k+1)&&e.isClosed(m,k+1)){f(m,k+1,l)}if(e.notMine(m-1,k-1)&&e.isClosed(m-1,k-1)){f(m-1,k-1,l)}if(e.notMine(m-1,k+1)&&e.isClosed(m-1,k+1)){f(m-1,k+1,l)}if(e.notMine(m+1,k-1)&&e.isClosed(m+1,k-1)){f(m+1,k-1,l)}if(e.notMine(m+1,k+1)&&e.isClosed(m+1,k+1)){f(m+1,k+1,l)}};this.openCell=function(m,k){if(e.isClosed(m,k)){var l=[];e.open(m,k);l.push({i:m,j:k});if(e.isMine(m,k)){this.dispatchEvent("lostGame");alert("Игра окончена")}else{if(e.isZero(m,k)){f(m,k,l)}else{l.push({i:m,j:k})}}this.dispatchEvent("changed",l);if(e.getNumberClosed()==g){this.dispatchEvent("wonGame");alert("Вы выграли")}}};this.getContentCell=function(l,k){return e.getContentCell(l,k)};this.isOpened=function(l,k){return e.isOpened(l,k)};this.isMine=function(l,k){return e.isMine(l,k)};this.getRows=function(){return h};this.getCols=function(){return i}};c.prototype=new b.EventDispatcher();return c});